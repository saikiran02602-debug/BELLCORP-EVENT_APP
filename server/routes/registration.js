const router=require('express').Router();const Registration=require('../models/Registration');const auth=require('../middleware/auth');router.post('/:eventId',auth,async(req,res)=>{const exists=await Registration.findOne({user:req.userId,event:req.params.eventId});if(exists)return res.status(400).json({message:'Already registered'});await Registration.create({user:req.userId,event:req.params.eventId});res.json({message:'Registered'});});router.delete('/:eventId',auth,async(req,res)=>{await Registration.findOneAndDelete({user:req.userId,event:req.params.eventId});res.json({message:'Cancelled'});});router.get('/my',auth,async(req,res)=>{const data=await Registration.find({user:req.userId}).populate('event');res.json(data);});module.exports=router;